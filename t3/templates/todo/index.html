{% extends 'base.html' %}

{% block navclass-todolist %}
active
{% endblock %}

{% block extra_js %}
  <script type="text/javascript">
    var todoListViewModel = new t3.views.todo.List();
    ko.applyBindings(todoListViewModel);

    $.getJSON('/api/items/', function (data) {
      _(data).each(function (item) {
        PubSub.publishSync(t3.topics.item.added, item);
      });
    });
  </script>
{% endblock %}

{% block content %}

  <table class="table">

    <thead>
      <tr>
        <th style="width: 1em">&nbsp;</th>
        <th>&nbsp;</th>
        <th style="width: 5em">Priority</th>
        <th style="width: 10em">Due</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>&nbsp;</td>
        <td>
          <div class="input-group" style="width: 100%">
            <input type="text" id="text" class="form-control input-sm"
                   placeholder="Enter a new todo item" />
            <span class="input-group-btn">
              <button class="btn btn-primary btn-sm" type="button">Add</button>
            </span>
          </div>
        </td>
      </tr>
      <!-- ko foreach: items -->
        <tr>
          <td><input type="checkbox" data-bind="
            checked: completed,
            attr: { id: id }
            "/></td>
          <td><label data-bind="
            text: text,
            attr: { 'for': id }
            "></label></td>
          <td><span data-bind="text: priority"></span></td>
          <td><span data-bind="text: due_date"></span></td>
        </tr>
      <!-- /ko -->
    </tbody>

  </table>

{% endblock %}